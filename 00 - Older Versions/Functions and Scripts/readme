Here you can find old scripts and functions used to compute the magnetic field of cylindrical permanent magnet with axial uniform magnetization, or equivalently, of axial solenoids. 
